const clubsAddress=[{id:"386626",subscriptionID:"386630",address:"Московское ш., 4, корп. 4",name:"Монте Роза"},{id:"386625",subscriptionID:"386631",address:"Красноармейская ул., 131",name:"Гудок"},{id:"386627",subscriptionID:"386628",address:"Южное ш., 5",name:"Амбар"},{id:"386623",subscriptionID:"386629",address:"Ул. Стара Загора, 58",name:"Шипка"}],messengers=document.querySelector(".messengers"),btn=document.querySelector(".messengers .btn-close"),acc=(messengers&&btn.addEventListener("click",()=>{messengers.classList.add("messengers--close")}),document.getElementsByClassName("accordion"));let i;for(i=0;i<acc.length;i++)acc[i].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"});const page=document.querySelector(".page"),body=document.querySelector(".page-body"),navigation=document.querySelector(".navigation"),btnClose=navigation.querySelector(".btn-close"),btnOpen=document.querySelector(".page-header__btn-menu"),onOverlayCreate=(navigation.addEventListener("click",e=>{e.preventDefault();var e=e.target;"A"===e.tagName&&(e=e.href.split("#")[1],document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"}),onCloseMenu())}),()=>{var e=document.createElement("div");e.className="overlay",body.appendChild(e)}),onOpenMenu=()=>{navigation.classList.contains("close")&&navigation.classList.remove("close"),navigation.classList.add("open"),onOverlayCreate(),page.classList.add("no-scroll"),document.querySelector(".overlay")&&document.querySelector(".overlay").addEventListener("click",onCloseMenu)},onCloseMenu=()=>{navigation.classList.remove("open"),navigation.classList.add("close"),document.querySelector(".overlay").remove(),page.classList.remove("no-scroll")},handleClickEscape=(btnClose.addEventListener("click",onCloseMenu),btnOpen.addEventListener("click",onOpenMenu),e=>{"Escape"===e.key&&onCloseMenu()}),checkResponse=(window.addEventListener("keydown",handleClickEscape),$(document).mouseleave(function(e){e.clientY<0&&$("#modal-stop").modal("show")}),$("#modal-stop").on("hidden.bs.modal",function(){$("#modal-stop").remove()}),e=>e.ok?e.json():Promise.reject("Ошибка "+e.status)),checkSuccess=e=>e&&e.success?e:Promise.reject("Ответ не success: "+e),generalRequest=(e,t)=>{let o;return o="localhost"===window.location.hostname?"http://127.0.0.1:8000/payments/"+e+"/":window.location.origin+"/payments/"+e+"/",fetch(o,t).then(checkResponse)};let forms=document.querySelectorAll(".needs-validation");const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]'),tooltipList=[...tooltipTriggerList].map(e=>new bootstrap.Tooltip(e)),orderedCount=($(".mask-phone").inputmask("+7 (999) 999-99-99",{placeholder:"+7 (***) ***-**-**",removeMaskOnSubmit:!0}),e=>Array.from(e.split("").reduce((e,t)=>(e.set(t,(e.get(t)||0)+1),e),new Map))),checkPhone=e=>{var t=e.value.replace(/[^+\d]/g,"");return 10===e.value.replace(/[^+\d]/g,"").length&&orderedCount(t)[0][1]<10},nowAgeUser=e=>{var t=new Date,t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(e),o=new Date(t.getFullYear(),e.getMonth(),e.getDate()),e=t.getFullYear()-e.getFullYear();return t<o&&(e-=1),e},maxValueDate=()=>{var e=(new Date).toLocaleDateString(),t=e.slice(3,5),e=e.slice(0,2);return(new Date).getFullYear()-14+"-"+t+"-"+e},onCheckValidateForm=($("body").on("input",".input-words",function(){this.value=this.value.replace(/[^a-zа-яё\s]/gi,"")}),e=>{let t=!1;var o=e.querySelector('[type="tel"]'),s=e.querySelector('[type="date"]'),a=checkPhone(o),s=14<=nowAgeUser(s.value);return a&&s?(e.classList.remove("was-validated"),o.classList.remove("is-invalid"),t=!t):(e.classList.add("was-validated"),a||o.classList.add("is-invalid"),t)}),getSubscriptionID=t=>"386624"!==t?clubsAddress.filter(e=>e.id===t)[0].subscriptionID:"386628",onSubmitForm=e=>{var e=new FormData(e.target),t=[{name:e.getAll("product_name")[0],price:e.getAll("product_price")[0],price_id:e.getAll("product_price_id")[0]},{name:e.getAll("product_name")[1],price:e.getAll("product_price")[1],price_id:getSubscriptionID(e.getAll("product_price_id")[0])}],e={products:t,customer:{first_name:e.get("first_name"),last_name:e.get("last_name"),middle_name:"",phone:e.get("phone"),birth_day:e.get("birth_day"),email:e.get("email")}},t=(1<t.length&&(e.recurrentable=!0),JSON.stringify(e)),e=new Headers,e=(e.append("Content-Type","application/json"),{method:"POST",headers:e,body:t,redirect:"follow"});generalRequest("orders",e).then(e=>{e.pay_url&&(window.location=e.pay_url)}).catch(e=>console.log("error",e))},pageBody=(document.addEventListener("DOMContentLoaded",()=>{forms.forEach(t=>{t.querySelector('[type="date"]').setAttribute("max",maxValueDate()),t.addEventListener("submit",function(e){e.preventDefault(),onCheckValidateForm(t)&&(t.querySelector('[type="submit"]').setAttribute("disabled",!0),onSubmitForm(e),t.reset())})})}),document.querySelector(".page-body")),scrollUp="scroll-up",scrollDown="scroll-down";let lastScroll=0;window.addEventListener("scroll",()=>{var e=window.pageYOffset;e<=50?pageBody.classList.remove(scrollUp):(e>lastScroll&&!pageBody.classList.contains(scrollDown)?(pageBody.classList.remove(scrollUp),pageBody.classList.add(scrollDown)):e<lastScroll&&pageBody.classList.contains(scrollDown)&&(pageBody.classList.remove(scrollDown),pageBody.classList.add(scrollUp)),lastScroll=e)});export{clubsAddress,generalRequest};
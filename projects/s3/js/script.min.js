const messengers=document.querySelector(".messengers"),btn=document.querySelector(".messengers .btn-close"),acc=(messengers&&btn.addEventListener("click",()=>{messengers.classList.add("messengers--close")}),!function(){function l(e,t){return t[4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}let s=document.querySelector("#label-hours"),r=document.querySelector("#label-minutes"),a=document.querySelector("#hours"),c=document.querySelector("#minutes"),i=document.querySelector("#seconds"),d=document.querySelector("#hh"),u=document.querySelector("#mm"),m=document.querySelector("#ss"),p=new Date("May 24, 2025 00:00:00").getTime(),g=setInterval(function(){var e=(new Date).getTime(),e=p-e,t=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);a.textContent=t,c.textContent=o,i.textContent=n,s.textContent=l(t,["час","часа","часов"]),r.textContent=l(o,["минута","минуты","минут"]),d.style.strokeDashoffset=440-440*t/24,u.style.strokeDashoffset=440-440*o/60,m.style.strokeDashoffset=440-440*n/60,e<0&&(clearInterval(g),a.textContent=0,c.textContent=0,i.textContent=0,d.style.strokeDashoffset=440,u.style.strokeDashoffset=440,m.style.strokeDashoffset=440)},100)}(),document.getElementsByClassName("accordion"));let i;for(i=0;i<acc.length;i++)acc[i].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"});function onEntry(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add("element-show")})}let options={threshold:[.5]},observer=new IntersectionObserver(onEntry,options),elements=document.querySelectorAll(".element-animation");for(let e of elements)observer.observe(e);const page=document.querySelector(".page"),body=document.querySelector(".page-body"),navigation=document.querySelector(".navigation"),btnClose=navigation.querySelector(".btn-close"),btnOpen=document.querySelector(".page-header__btn-menu"),onOverlayCreate=(navigation.addEventListener("click",e=>{e.preventDefault();var e=e.target;"A"===e.tagName&&(e=e.href.split("#")[1],document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"}),onCloseMenu())}),()=>{var e=document.createElement("div");e.className="overlay",body.appendChild(e)}),onOpenMenu=()=>{navigation.classList.contains("close")&&navigation.classList.remove("close"),navigation.classList.add("open"),onOverlayCreate(),page.classList.add("no-scroll"),document.querySelector(".overlay")&&document.querySelector(".overlay").addEventListener("click",onCloseMenu)},onCloseMenu=()=>{navigation.classList.remove("open"),navigation.classList.add("close"),document.querySelector(".overlay").remove(),page.classList.remove("no-scroll")},handleClickEscape=(btnClose.addEventListener("click",onCloseMenu),btnOpen.addEventListener("click",onOpenMenu),e=>{"Escape"===e.key&&onCloseMenu()}),BASE_URL=(window.addEventListener("keydown",handleClickEscape),$(document).mouseleave(function(e){e.clientY<0&&$("#modal-stop").modal("show")}),$("#modal-stop").on("hidden.bs.modal",function(){$("#modal-stop").remove()}),"http://pro.fhclub.ru/payments/"),checkResponse=e=>e.ok?e.json():Promise.reject("Ошибка "+e.status),checkSuccess=e=>e&&e.success?e:Promise.reject("Ответ не success: "+e),generalRequest=(e,t)=>fetch(""+BASE_URL+e+"/",t).then(checkResponse);let forms=document.querySelectorAll(".needs-validation");const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]'),tooltipList=[...tooltipTriggerList].map(e=>new bootstrap.Tooltip(e)),orderedCount=($(".mask-phone").inputmask("+7 (999) 999-99-99",{placeholder:"+7 (***) ***-**-**",removeMaskOnSubmit:!0}),$("body").on("input",".input-words",function(){this.value=this.value.replace(/[^a-zа-яё\s]/gi,"")}),e=>Array.from(e.split("").reduce((e,t)=>(e.set(t,(e.get(t)||0)+1),e),new Map))),checkPhone=e=>{var t=e.value.replace(/[^+\d]/g,"");return 10===e.value.replace(/[^+\d]/g,"").length&&orderedCount(t)[0][1]<10},nowAgeUser=e=>{var t=new Date,t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(e),o=new Date(t.getFullYear(),e.getMonth(),e.getDate()),e=t.getFullYear()-e.getFullYear();return t<o&&(e-=1),e},maxValueDate=()=>{var e=(new Date).toLocaleDateString(),t=e.slice(3,5),e=e.slice(0,2);return(new Date).getFullYear()-14+"-"+t+"-"+e},onCheckValidateForm=e=>{let t=!1;var o=e.querySelector('[type="tel"]'),n=e.querySelector('[type="date"]'),l=checkPhone(o),n=14<=nowAgeUser(n.value);return l&&n?(e.classList.remove("was-validated"),o.classList.remove("is-invalid"),t=!t):(e.classList.add("was-validated"),l||o.classList.add("is-invalid"),t)},onSubmitForm=e=>{e=new FormData(e.target);let t;t=1<e.getAll("price_id").length?[{name:e.getAll("name")[0],price:e.getAll("price")[0],price_id:e.getAll("price_id")[0]},{name:e.getAll("name")[1],price:e.getAll("price")[1],price_id:e.getAll("price_id")[1]}]:[{name:e.getAll("name")[0],price:e.getAll("price")[0],price_id:e.getAll("price_id")[0]}];var e={customer:{first_name:e.get("first_name"),last_name:e.get("last_name"),phone:e.get("phone"),birth_day:e.get("birth_day"),email:e.get("email")},product:{name:e.getAll("name")[0],price:e.getAll("price")[0],price_id:e.getAll("price_id")[0]}},e=(1<t.length&&(e.recurrentable=!0),console.log(e),JSON.stringify(e)),o=new Headers,o=(o.append("Content-Type","application/json"),{method:"POST",headers:o,body:e,redirect:"follow"});generalRequest("orders",o).then(e=>{e.pay_url&&(window.location=e.pay_url)}).catch(e=>console.log("error",e))},pageBody=(document.addEventListener("DOMContentLoaded",()=>{forms.forEach(t=>{t.querySelector('[type="date"]').setAttribute("max",maxValueDate()),t.addEventListener("submit",function(e){e.preventDefault(),onCheckValidateForm(t)&&(t.querySelector('[type="submit"]').setAttribute("disabled",!0),onSubmitForm(e),t.reset())})})}),document.querySelector(".page-body")),scrollUp="scroll-up",scrollDown="scroll-down";let lastScroll=0;window.addEventListener("scroll",()=>{var e=window.pageYOffset;e<=0?pageBody.classList.remove(scrollUp):(e>lastScroll&&!pageBody.classList.contains(scrollDown)?(pageBody.classList.remove(scrollUp),pageBody.classList.add(scrollDown)):e<lastScroll&&pageBody.classList.contains(scrollDown)&&(pageBody.classList.remove(scrollDown),pageBody.classList.add(scrollUp)),lastScroll=e)});export{generalRequest};
{"version":3,"sources":["canvas.min.js"],"names":["canvas","document","getElementById","can_w","parseInt","getAttribute","can_h","ctx","getContext","ball","x","y","vx","vy","r","alpha","phase","ball_color","g","b","R","balls","alpha_f","alpha_phase","link_line_width","dis_limit","add_mouse_point","mouse_in","mouse_ball","type","getRandomSpeed","pos","min","randomNumFrom","randomArrayItem","arr","Math","floor","random","length","max","getRandomBall","randomSidePos","ceil","renderBalls","Array","prototype","forEach","call","hasOwnProperty","fillStyle","beginPath","arc","PI","closePath","fill","updateBalls","new_balls","push","abs","cos","slice","loopAlphaInf","renderLines","fraction","i","j","getDisOf","toString","strokeStyle","lineWidth","moveTo","lineTo","stroke","b1","b2","delta_x","delta_y","sqrt","addBallIfy","render","clearRect","window","requestAnimationFrame","initBalls","num","initCanvas","setAttribute","innerWidth","innerHeight","goMovie","console","log","addEventListener","e","event","pageX","pageY"],"mappings":"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","file":"canvas.min.js","sourcesContent":["var canvas = document.getElementById(\"nokey\"),\r\n  can_w = parseInt(canvas.getAttribute(\"width\")),\r\n  can_h = parseInt(canvas.getAttribute(\"height\")),\r\n  ctx = canvas.getContext(\"2d\");\r\n\r\n// console.log(typeof can_w);\r\n\r\nvar ball = {\r\n    x: 0,\r\n    y: 0,\r\n    vx: 0,\r\n    vy: 0,\r\n    r: 0,\r\n    alpha: 1,\r\n    phase: 0\r\n  },\r\n  ball_color = {\r\n    r: 230,\r\n    g: 230,\r\n    b: 230\r\n  },\r\n  R = 6,\r\n  balls = [],\r\n  alpha_f = 0.03,\r\n  alpha_phase = 0,\r\n  // Line\r\n  link_line_width = 0.8,\r\n  dis_limit = 360,\r\n  add_mouse_point = true,\r\n  mouse_in = false,\r\n  mouse_ball = {\r\n    x: 0,\r\n    y: 0,\r\n    vx: 0,\r\n    vy: 0,\r\n    r: 0,\r\n    type: \"mouse\"\r\n  };\r\n\r\n// Random speed\r\nfunction getRandomSpeed(pos) {\r\n  var min = -1,\r\n    max = 1;\r\n  switch (pos) {\r\n    case \"top\":\r\n      return [randomNumFrom(min, max), randomNumFrom(0.1, max)];\r\n      break;\r\n    case \"right\":\r\n      return [randomNumFrom(min, -0.1), randomNumFrom(min, max)];\r\n      break;\r\n    case \"bottom\":\r\n      return [randomNumFrom(min, max), randomNumFrom(min, -0.1)];\r\n      break;\r\n    case \"left\":\r\n      return [randomNumFrom(0.1, max), randomNumFrom(min, max)];\r\n      break;\r\n    default:\r\n      return;\r\n      break;\r\n  }\r\n}\r\n\r\nfunction randomArrayItem(arr) {\r\n  return arr[Math.floor(Math.random() * arr.length)];\r\n}\r\n\r\nfunction randomNumFrom(min, max) {\r\n  return Math.random() * (max - min) + min;\r\n}\r\nconsole.log(randomNumFrom(0, 10));\r\n// Random Ball\r\nfunction getRandomBall() {\r\n  var pos = randomArrayItem([\"top\", \"right\", \"bottom\", \"left\"]);\r\n  switch (pos) {\r\n    case \"top\":\r\n      return {\r\n        x: randomSidePos(can_w),\r\n        y: -R,\r\n        vx: getRandomSpeed(\"top\")[0],\r\n        vy: getRandomSpeed(\"top\")[1],\r\n        r: R,\r\n        alpha: 1,\r\n        phase: randomNumFrom(0, 10)\r\n      };\r\n      break;\r\n    case \"right\":\r\n      return {\r\n        x: can_w + R,\r\n        y: randomSidePos(can_h),\r\n        vx: getRandomSpeed(\"right\")[0],\r\n        vy: getRandomSpeed(\"right\")[1],\r\n        r: R,\r\n        alpha: 1,\r\n        phase: randomNumFrom(0, 10)\r\n      };\r\n      break;\r\n    case \"bottom\":\r\n      return {\r\n        x: randomSidePos(can_w),\r\n        y: can_h + R,\r\n        vx: getRandomSpeed(\"bottom\")[0],\r\n        vy: getRandomSpeed(\"bottom\")[1],\r\n        r: R,\r\n        alpha: 1,\r\n        phase: randomNumFrom(0, 10)\r\n      };\r\n      break;\r\n    case \"left\":\r\n      return {\r\n        x: -R,\r\n        y: randomSidePos(can_h),\r\n        vx: getRandomSpeed(\"left\")[0],\r\n        vy: getRandomSpeed(\"left\")[1],\r\n        r: R,\r\n        alpha: 1,\r\n        phase: randomNumFrom(0, 10)\r\n      };\r\n      break;\r\n  }\r\n}\r\n\r\nfunction randomSidePos(length) {\r\n  return Math.ceil(Math.random() * length);\r\n}\r\n\r\n// Draw Ball\r\nfunction renderBalls() {\r\n  Array.prototype.forEach.call(balls, function(b) {\r\n    if (!b.hasOwnProperty(\"type\")) {\r\n      ctx.fillStyle =\r\n        \"rgba(\" +\r\n        ball_color.r +\r\n        \",\" +\r\n        ball_color.g +\r\n        \",\" +\r\n        ball_color.b +\r\n        \",\" +\r\n        b.alpha +\r\n        \")\";\r\n      ctx.beginPath();\r\n      ctx.arc(b.x, b.y, R, 0, Math.PI * 2, true);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    }\r\n  });\r\n}\r\n\r\n// Update balls\r\nfunction updateBalls() {\r\n  var new_balls = [];\r\n  Array.prototype.forEach.call(balls, function(b) {\r\n    b.x += b.vx;\r\n    b.y += b.vy;\r\n\r\n    if (b.x > -50 && b.x < can_w + 50 && b.y > -50 && b.y < can_h + 50) {\r\n      new_balls.push(b);\r\n    }\r\n\r\n    // alpha change\r\n    b.phase += alpha_f;\r\n    b.alpha = Math.abs(Math.cos(b.phase));\r\n    // console.log(b.alpha);\r\n  });\r\n\r\n  balls = new_balls.slice(0);\r\n}\r\n\r\n// loop alpha\r\nfunction loopAlphaInf() {}\r\n\r\n// Draw lines\r\nfunction renderLines() {\r\n  var fraction, alpha;\r\n  for (var i = 0; i < balls.length; i++) {\r\n    for (var j = i + 1; j < balls.length; j++) {\r\n      fraction = getDisOf(balls[i], balls[j]) / dis_limit;\r\n\r\n      if (fraction < 1) {\r\n        alpha = (1 - fraction).toString();\r\n\r\n        ctx.strokeStyle = \"rgba(150,150,150,\" + alpha + \")\";\r\n        ctx.lineWidth = link_line_width;\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(balls[i].x, balls[i].y);\r\n        ctx.lineTo(balls[j].x, balls[j].y);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// calculate distance between two points\r\nfunction getDisOf(b1, b2) {\r\n  var delta_x = Math.abs(b1.x - b2.x),\r\n    delta_y = Math.abs(b1.y - b2.y);\r\n\r\n  return Math.sqrt(delta_x * delta_x + delta_y * delta_y);\r\n}\r\n\r\n// add balls if there a little balls\r\nfunction addBallIfy() {\r\n  if (balls.length < 20) {\r\n    balls.push(getRandomBall());\r\n  }\r\n}\r\n\r\n// Render\r\nfunction render() {\r\n  ctx.clearRect(0, 0, can_w, can_h);\r\n\r\n  renderBalls();\r\n\r\n  renderLines();\r\n\r\n  updateBalls();\r\n\r\n  addBallIfy();\r\n\r\n  window.requestAnimationFrame(render);\r\n}\r\n\r\n// Init Balls\r\nfunction initBalls(num) {\r\n  for (var i = 1; i <= num; i++) {\r\n    balls.push({\r\n      x: randomSidePos(can_w),\r\n      y: randomSidePos(can_h),\r\n      vx: getRandomSpeed(\"top\")[0],\r\n      vy: getRandomSpeed(\"top\")[1],\r\n      r: R,\r\n      alpha: 1,\r\n      phase: randomNumFrom(0, 10)\r\n    });\r\n  }\r\n}\r\n// Init Canvas\r\nfunction initCanvas() {\r\n  canvas.setAttribute(\"width\", window.innerWidth);\r\n  canvas.setAttribute(\"height\", window.innerHeight);\r\n\r\n  can_w = parseInt(canvas.getAttribute(\"width\"));\r\n  can_h = parseInt(canvas.getAttribute(\"height\"));\r\n}\r\nwindow.addEventListener(\"resize\", function(e) {\r\n  console.log(\"Window Resize...\");\r\n  initCanvas();\r\n});\r\n\r\nfunction goMovie() {\r\n  initCanvas();\r\n  initBalls(30);\r\n  window.requestAnimationFrame(render);\r\n}\r\ngoMovie();\r\n\r\n// Mouse effect\r\ncanvas.addEventListener(\"mouseenter\", function() {\r\n  console.log(\"mouseenter\");\r\n  mouse_in = true;\r\n  balls.push(mouse_ball);\r\n});\r\ncanvas.addEventListener(\"mouseleave\", function() {\r\n  console.log(\"mouseleave\");\r\n  mouse_in = false;\r\n  var new_balls = [];\r\n  Array.prototype.forEach.call(balls, function(b) {\r\n    if (!b.hasOwnProperty(\"type\")) {\r\n      new_balls.push(b);\r\n    }\r\n  });\r\n  balls = new_balls.slice(0);\r\n});\r\ncanvas.addEventListener(\"mousemove\", function(e) {\r\n  var e = e || window.event;\r\n  mouse_ball.x = e.pageX;\r\n  mouse_ball.y = e.pageY;\r\n  // console.log(mouse_ball);\r\n});"]}
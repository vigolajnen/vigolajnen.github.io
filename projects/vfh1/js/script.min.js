(function () {
   // header scroll
   const body = document.body;
  //  const triggerMenu = document.querySelector(".page-header__btn-burger");

   const scrollUp = "scroll-up";
   const scrollDown = "scroll-down";
   let lastScroll = 0;

  //  triggerMenu.addEventListener("click", () => {
  //    body.classList.toggle("menu-open");
  //    triggerMenu.classList.toggle("active");
  //  });

   window.addEventListener("scroll", () => {
     const currentScroll = window.pageYOffset;
     if (currentScroll <= 0) {
       body.classList.remove(scrollUp);
       return;
     }

     if (currentScroll > lastScroll && !body.classList.contains(scrollDown)) {
       // down
       body.classList.remove(scrollUp);
       body.classList.add(scrollDown);
     } else if (currentScroll < lastScroll && body.classList.contains(scrollDown)) {
       // up
       body.classList.remove(scrollDown);
       body.classList.add(scrollUp);
     }
     lastScroll = currentScroll;
   });
})()

// mob menu

export let mobileMenuToggle = () => {
  const page = document.querySelector('.page');
  const btnMenuOpen = document.querySelector('.page-header__btn-menu');
  const btnMenuOpenClose = document.querySelector('.mobile-menu__btn-close');
  const headerTop = document.querySelector('.page-header');
  const mobMenu = document.querySelector('.mobile-menu');

  if (btnMenuOpen) {
    btnMenuOpen.addEventListener('click', function() {
      headerTop.classList.add('page-header--mob');
      page.classList.add('page--overlay');
      mobMenu.classList.add('active');
    });
  }

  if (btnMenuOpenClose) {
    btnMenuOpenClose.addEventListener('click', function() {
      headerTop.classList.remove('page-header--mob');
      page.classList.remove('page--overlay');
      mobMenu.classList.remove('active');
    });
  }

  if (mobMenu) {
    mobMenu.addEventListener('click', () => {
      mobMenu.classList.remove('active');
    });
  }

  window.onresize = function() {
    if (window.screen.width > 768) {
      document.querySelector('.page').classList.remove('page--overlay');
      if (headerTop.classList.contains('page-header--mob')) {
        headerTop.classList.remove('page-header--mob');
      }
    }
  };
};

export let navCityToggle = () => {
  const city = document.querySelector('.nav-city__title');
  const cityName = document.querySelector('.nav-city__title span');
  const cityList = document.querySelector('.nav-city__wrapper');

  if (city) {
    city.addEventListener('click', evt => {
      cityList.classList.toggle('d-block');
      cityList.classList.toggle('d-none');
    });
  }

  if (cityList) {
    cityList.addEventListener('click', evt => {
      evt.preventDefault();
      let target = evt.target.tagName;
      if (target == 'A') {
        let activeNameCity = evt.target.innerText;
        cityName.innerText = activeNameCity;
        cityList.classList.toggle('d-block');
        cityList.classList.toggle('d-none');
      }
    });
  }
};

mobileMenuToggle();

navCityToggle();

// ошибка на странице акций - на любой кроме главной

// modal tour
const myModal = new bootstrap.Modal(
  document.getElementById('exampleModalToggle'),
  {},
);

const btnModalOpen = document.querySelector('#exampleModalToggle');

if (btnModalOpen) {
  btnModalOpen.addEventListener('click', () => {
    if (myModal) {
      myModal.show();
    }
  });

  // $(btnModalOpen).on('shown.bs.modal', function () {
  //   if (myModal) {
  //     myModal.show();
  //   }
  // })
}

const mainCity = document.querySelector('.definition-city');

if (mainCity) {
  mainCity.addEventListener('click', () => {
    mainCity.classList.add('d-none');
  })
}


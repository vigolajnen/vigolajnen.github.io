!function(){const e={bg_1:"linear-gradient(135deg, #585858 0%, #585858 100%)",bg_2:"linear-gradient(135deg, #226B9E 0%, #226B9E 100%)",bg_3:"linear-gradient(135deg, #45281D 0%, #45281D 100%)",bg_4:"linear-gradient(135deg, #3B3230 0%, #3B3230 100%)",bg_5:"linear-gradient(135deg, #DBDAD8 0%, #DBDAD8 100%)",bg_6:"linear-gradient(135deg, #522F20 0%, #522F20 100%)",bg_7:"linear-gradient(135deg, #585858 0%, #585858 100%)"},t={light:"#fff",dark:"#4b5052"},i={bg_1:{gradient:e.bg_1,color:t.light},bg_2:{gradient:e.bg_2,color:t.light},bg_3:{gradient:e.bg_3,color:t.light},bg_4:{gradient:e.bg_4,color:t.light},bg_5:{gradient:e.bg_5,color:t.dark},bg_6:{gradient:e.bg_6,color:t.light},bg_7:{gradient:e.bg_7,color:t.light}},r={selector:"tariff-tooltip",class:"tariff-tooltip"},a={selector:"trade-in-tooltip",class:"trade-in-tooltip"},n={selector:"advantages-tooltip",class:"advantages-tooltip"},s={567:{slidesPerView:2,spaceBetween:5},768:{slidesPerView:2.5,spaceBetween:10},1024:{slidesPerView:2.7,spaceBetween:10},1200:{slidesPerView:3.5,spaceBetween:10},1400:{slidesPerView:4,spaceBetween:10}},o=(e,t)=>[].slice.call(document.querySelectorAll(`[data-bs-toggle="${e}"]`)).map((e=>new bootstrap.Tooltip(e,{customClass:t,delay:{show:100,hide:50}})));o(r.selector,r.class),o(a.selector,a.class),o(n.selector,n.class);!function(){"use strict";let e=document.querySelectorAll(".needs-validation"),t=document.querySelector(".modal-tour"),i=document.getElementById("modal-submit-form");if(t){const r=new bootstrap.Modal(t);Array.prototype.slice.call(e).forEach((function(e){e.addEventListener("submit",(function(t){if(e.checkValidity()){t.preventDefault(),e.classList.remove("was-validated");const a=new bootstrap.Modal(i);r.hide(),a.show(),i.addEventListener("hidden.bs.modal",(function(){e.submit(),e.reset()}))}else t.preventDefault(),t.stopPropagation(),e.classList.add("was-validated")}),!1)}))}else Array.prototype.slice.call(e).forEach((function(e){e.addEventListener("submit",(function(t){if(e.checkValidity()){t.preventDefault(),e.classList.remove("was-validated");new bootstrap.Modal(i).show(),i.addEventListener("hidden.bs.modal",(function(){e.submit(),e.reset()}))}else t.preventDefault(),t.stopPropagation(),e.classList.add("was-validated")}),!1)}))}();const l={init(){this.isInitialized||(this.overrideFormSubmit(),this.initTariffSelectHandler(),this.isInitialized=!0)},overrideFormSubmit(){const e=document.querySelectorAll(".needs-validation");0!==e.length&&e.forEach((e=>{this.setupFormHandler(e)}))},setupFormHandler(e){e.addEventListener("submit",(t=>{this.handleFormSubmit(t,e)}))},handleFormSubmit(e,t){if(!t.checkValidity())return e.preventDefault(),e.stopPropagation(),void t.classList.add("was-validated");e.preventDefault(),this.processValidForm(t)},processValidForm(e){e.classList.remove("was-validated");const t=this.collectFormData(e);this.sendFormData(t),this.resetFormState(e)},collectFormData(e){return{name:this.getElementValue("formName"),phone:this.getElementValue("formPhone"),tariff:this.getSelectedTariff(e),clubId:this.getClubId(e),pageUrl:window.location.href}},getElementValue(e){const t=document.getElementById(e);return t?t.value:""},getSelectedTariff(e){const t=e.querySelector('select[name="service"]');if(!t||t.selectedIndex<0)return"";return t.options[t.selectedIndex].text.trim()},getClubId(e){const t=e.querySelector('input[name="clubId"]');return t?t.value:""},async sendFormData(e){try{const t=await fetch("/api/tariffs-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP ${t.status}`);await t.json()}catch(e){}},resetFormState(e){e.classList.remove("was-validated"),this.clearFieldStates(e),this.hideSelectedTariffInfo()},clearFieldStates(e){e.querySelectorAll(".is-valid, .is-invalid").forEach((e=>{e.classList.remove("is-valid","is-invalid")}))},hideSelectedTariffInfo(){const e=document.querySelector(".selected-tariff-info");e&&(e.style.display="none")},initTariffSelectHandler(){document.querySelectorAll('select[name="service"]').forEach((e=>{e.addEventListener("change",this.handleTariffChange.bind(this))}))},handleTariffChange(e){const t=e.target.options[e.target.selectedIndex];t.value&&"undefined"!=typeof gtag&&gtag("event","tariff_select",{tariff_name:t.text.trim(),tariff_value:t.value})},setTariffFromButton(e,t){document.querySelectorAll('select[name="service"]').forEach((t=>{if(Array.from(t.options).find((t=>t.value===e))){t.value=e;const i=new Event("change",{bubbles:!0});t.dispatchEvent(i)}}))}};let c,d,f=!1;function u(){f||(document.querySelector("#js-slider-gallery .swiper-container")&&(c=new Swiper("#js-slider-gallery .swiper-container",{slidesPerView:1,effect:"fade",watchOverflow:!0,pagination:{el:".page-tariffs__club-gallery .swiper-pagination",clickable:!0},navigation:{nextEl:".page-tariffs__club-gallery .swiper-button-next",prevEl:".page-tariffs__club-gallery .swiper-button-prev"},on:{slideChange:g,init:m}})),document.querySelector("#js-slider-tariffs .swiper-container")&&(d=new Swiper("#js-slider-tariffs .swiper-container",{slidesPerView:1.05,spaceBetween:5,watchOverflow:!0,pagination:{el:".club-tariffs .swiper-pagination",clickable:!0},navigation:{nextEl:".club-tariffs .swiper-button-next",prevEl:".club-tariffs .swiper-button-prev"},breakpoints:s,on:{init:p,resize:p}}),document.querySelectorAll(".club-tariff__link").forEach((e=>{e.addEventListener("click",h)})),document.querySelectorAll(".club-tariff").forEach((e=>{e.addEventListener("click",v)}))),window.addEventListener("load",p),f=!0)}function g(){b(this.slides[this.activeIndex].getAttribute("data-slide"))}function m(){b(this.slides[this.activeIndex].getAttribute("data-slide"))}function b(e){if(!i[e])return;const t=document.getElementById("tariffsSection"),r=document.querySelector("#js-slider-gallery"),a=i[e],n=`--bg-color: ${a.gradient}; --text-color: ${a.color}`;t&&t.setAttribute("style",n),r&&r.setAttribute("style",n),function(e){const t=document.querySelectorAll(".club-tariff"),i=document.querySelector(`[data-tariff="${e}"]`);t.forEach((e=>{e.style.transform="scale(1)",e.style.boxShadow="0 2px 15px rgba(0, 0, 0, 0.1)"})),i&&(i.style.transform="scale(1.05)",i.style.boxShadow="0 10px 30px rgba(0, 0, 0, 0.2)")}(e)}function p(){if(!d)return;const e=document.querySelector("#js-slider-tariffs"),t=d.slides.length,i=d.params.slidesPerView;e&&e.classList.toggle("all-visible",t<=i)}function h(e){e.preventDefault(),function(e){const t=document.getElementById("feedbackForm");if(!t)return;const i=e.getAttribute("data-tariff-name"),r=e.getAttribute("data-tariff-price");t.scrollIntoView({behavior:"smooth",block:"start"}),void 0!==l&&l.setTariffFromButton&&setTimeout((()=>{l.setTariffFromButton(r,i)}),300)}(e.currentTarget)}function v(e){if(e.target.closest(".club-tariff__link"))return;e.currentTarget.getAttribute("data-tariff");!function(e,t){if(d){const e=Array.from(d.slides).indexOf(t);-1!==e&&d.slideTo(e)}}(0,e.currentTarget)}function y(){const e=document.querySelectorAll(".lazy-iframe"),t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const i=e.target,r=i.getAttribute("data-src");r&&!i.src&&(i.src=r,i.onload=()=>{i.style.background="none"}),t.unobserve(i)}}))}));e.forEach((e=>t.observe(e)))}window.initTariffsAndSliders=u,window.destroyTariffsAndSliders=function(){c&&c.destroy&&c.destroy(!0,!0),d&&d.destroy&&d.destroy(!0,!0),f=!1},document.addEventListener("DOMContentLoaded",(()=>{u(),y(),function(){if("undefined"==typeof MutationObserver)return;new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)if(1===e.nodeType&&(e.matches&&e.matches(".lazy-iframe")||e.querySelectorAll&&e.querySelectorAll(".lazy-iframe").length>0))return void y()})).observe(document.body,{childList:!0,subtree:!0})}(),l.init()}))}();
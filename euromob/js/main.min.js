!function(){var navMain=document.querySelector(".navigation"),navMainList=document.querySelector(".navigation__list"),navToggle=document.querySelector(".navigation__toggle");navMain.classList.remove("navigation--nojs"),navToggle.addEventListener("click",function(){navMain.classList.toggle("mobile-menu--active"),navMain.classList.contains("navigation--closed")?(navMain.classList.remove("navigation--closed"),navMain.classList.add("navigation--opened"),document.querySelector("body").style.overflow="hidden"):(navMain.classList.add("navigation--closed"),navMain.classList.remove("navigation--opened"),document.querySelector("body").style.overflow="visible")}),navMainList.addEventListener("click",function(){navMain.classList.add("navigation--closed"),navMain.classList.remove("navigation--opened"),document.querySelector("body").style.overflow="visible"})}(),$(".scroll-feedback").on("click",function(){$("html,body").animate({scrollTop:$(".feedback").offset().top+"px"},{duration:1e3})});var popup=document.querySelector(".popup"),popupOverlay=document.querySelector(".popup-overlay"),popupBtnClose=document.querySelector(".popup-close"),wrapper=document.querySelector(".wrapper"),inputName=popup.querySelector("[id=name]");wrapper.addEventListener("click",function(evt){"button button-order popup-btn"==evt.target.className&&(popupOverlay.classList.add("popup-show"),document.querySelector("body").classList.add("overlay"),inputName.focus())}),popupBtnClose.addEventListener("click",function(evt){evt.preventDefault(),popupOverlay.classList.remove("popup-show"),document.querySelector("body").classList.remove("overlay")}),$(".popup-order__input--file").change(function(){""!=$(this).val()?$(this).prev().text("Выбрано файлов: "+$(this)[0].files.length):$(this).prev().text("Прикрепить файл (jpg, pdf, excel, word, zip, rar)")});var oldScrollY=0,div=document.getElementById("header-fixed");$(window).ready(function(){div.classList.add("fixed"),window.onscroll=function(){var scrolled=window.pageYOffset||document.documentElement.scrollTop;0<scrolled-oldScrollY&&(div.className="fixed fixed-top"),1e3<$(window).scrollTop()?div.classList.add("header-mobile--dark"):div.classList.remove("header-mobile--dark"),oldScrollY=scrolled}}),$(".js-organizers").on("click",function(){$("html,body").animate({scrollTop:$("#organizers").offset().top+"px"},{duration:1e3})}),$(".js-advantages").on("click",function(){$("html,body").animate({scrollTop:$("#advantages").offset().top+"px"},{duration:1e3})}),$(".js-conditions").on("click",function(){$("html,body").animate({scrollTop:$("#conditions").offset().top+"px"},{duration:1e3})}),$(".js-promo").on("click",function(){$("html,body").animate({scrollTop:$("#promo").offset().top+"px"},{duration:1e3})});var canvas=document.getElementById("nokey"),can_w=parseInt(canvas.getAttribute("width")),can_h=parseInt(canvas.getAttribute("height")),ctx=canvas.getContext("2d"),ball={x:0,y:0,vx:0,vy:0,r:0,alpha:1,phase:0},ball_color={r:81,g:130,b:221},R=2,balls=[],alpha_f=.03,alpha_phase=0,link_line_width=.8,dis_limit=260,add_mouse_point=!0,mouse_in=!1,mouse_ball={x:0,y:0,vx:0,vy:0,r:0,type:"mouse"};function getRandomSpeed(pos){switch(pos){case"top":return[randomNumFrom(-1,1),randomNumFrom(.1,1)];case"right":return[randomNumFrom(-1,-.1),randomNumFrom(-1,1)];case"bottom":return[randomNumFrom(-1,1),randomNumFrom(-1,-.1)];case"left":return[randomNumFrom(.1,1),randomNumFrom(-1,1)];default:return}}function randomArrayItem(arr){return arr[Math.floor(Math.random()*arr.length)]}function randomNumFrom(min,max){return Math.random()*(max-min)+min}function getRandomBall(){switch(randomArrayItem(["top","right","bottom","left"])){case"top":return{x:randomSidePos(can_w),y:-R,vx:getRandomSpeed("top")[0],vy:getRandomSpeed("top")[1],r:R,alpha:1,phase:randomNumFrom(0,10)};case"right":return{x:can_w+R,y:randomSidePos(can_h),vx:getRandomSpeed("right")[0],vy:getRandomSpeed("right")[1],r:R,alpha:1,phase:randomNumFrom(0,10)};case"bottom":return{x:randomSidePos(can_w),y:can_h+R,vx:getRandomSpeed("bottom")[0],vy:getRandomSpeed("bottom")[1],r:R,alpha:1,phase:randomNumFrom(0,10)};case"left":return{x:-R,y:randomSidePos(can_h),vx:getRandomSpeed("left")[0],vy:getRandomSpeed("left")[1],r:R,alpha:1,phase:randomNumFrom(0,10)}}}function randomSidePos(length){return Math.ceil(Math.random()*length)}function renderBalls(){Array.prototype.forEach.call(balls,function(b){b.hasOwnProperty("type")||(ctx.fillStyle="rgba("+ball_color.r+","+ball_color.g+","+ball_color.b+","+b.alpha+")",ctx.beginPath(),ctx.arc(b.x,b.y,R,0,2*Math.PI,!0),ctx.closePath(),ctx.fill())})}function updateBalls(){var new_balls=[];Array.prototype.forEach.call(balls,function(b){b.x+=b.vx,b.y+=b.vy,-50<b.x&&b.x<can_w+50&&-50<b.y&&b.y<can_h+50&&new_balls.push(b),b.phase+=alpha_f,b.alpha=Math.abs(Math.cos(b.phase))}),balls=new_balls.slice(0)}function loopAlphaInf(){}function renderLines(){for(var fraction,alpha,i=0;i<balls.length;i++)for(var j=i+1;j<balls.length;j++)(fraction=getDisOf(balls[i],balls[j])/dis_limit)<1&&(alpha=(1-fraction).toString(),ctx.strokeStyle="rgba(150,150,150,"+alpha+")",ctx.lineWidth=link_line_width,ctx.beginPath(),ctx.moveTo(balls[i].x,balls[i].y),ctx.lineTo(balls[j].x,balls[j].y),ctx.stroke(),ctx.closePath())}function getDisOf(b1,b2){var delta_x=Math.abs(b1.x-b2.x),delta_y=Math.abs(b1.y-b2.y);return Math.sqrt(delta_x*delta_x+delta_y*delta_y)}function addBallIfy(){balls.length<20&&balls.push(getRandomBall())}function render(){ctx.clearRect(0,0,can_w,can_h),renderBalls(),renderLines(),updateBalls(),addBallIfy(),window.requestAnimationFrame(render)}function initBalls(num){for(var i=1;i<=num;i++)balls.push({x:randomSidePos(can_w),y:randomSidePos(can_h),vx:getRandomSpeed("top")[0],vy:getRandomSpeed("top")[1],r:R,alpha:1,phase:randomNumFrom(0,10)})}function initCanvas(){canvas.setAttribute("width",window.innerWidth),canvas.setAttribute("height",window.innerHeight),can_w=parseInt(canvas.getAttribute("width")),can_h=parseInt(canvas.getAttribute("height"))}function goMovie(){initCanvas(),initBalls(30),window.requestAnimationFrame(render)}console.log(randomNumFrom(0,10)),window.addEventListener("resize",function(e){console.log("Window Resize..."),initCanvas()}),goMovie(),canvas.addEventListener("mouseenter",function(){console.log("mouseenter"),mouse_in=!0,balls.push(mouse_ball)}),canvas.addEventListener("mouseleave",function(){console.log("mouseleave"),mouse_in=!1;var new_balls=[];Array.prototype.forEach.call(balls,function(b){b.hasOwnProperty("type")||new_balls.push(b)}),balls=new_balls.slice(0)}),canvas.addEventListener("mousemove",function(e){e=e||window.event;mouse_ball.x=e.pageX,mouse_ball.y=e.pageY});
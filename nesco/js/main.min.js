"use strict";!function(){var mobileCatalog=document.querySelector(".mobile-catalog"),mobileCatalogBtn=document.querySelector(".mobile-sidebar__catalog-btn"),mobileBtnClose=document.querySelector(".mobile-catalog__close"),navMain=document.querySelector(".mobile-menu"),navToggle=document.querySelector(".navigation__toggle");document.querySelector(".js-logo");navToggle.addEventListener("click",function(){navMain.classList.toggle("mobile-menu--active"),navMain.classList.contains("mobile-catalog--active")&&document.querySelector("body").classList.add("overflow"),document.querySelector("body").classList.add("overflow")}),document.querySelector(".mobile-menu__close").addEventListener("click",function(){navMain.classList.remove("mobile-menu--active"),document.querySelector("body").classList.remove("overflow")}),mobileCatalogBtn.addEventListener("click",function(){mobileCatalog.classList.toggle("mobile-catalog--active"),mobileCatalog.classList.contains("mobile-catalog--active")&&(document.querySelector("body").style.overflow="hidden"),document.querySelector("body").style.overflow="visible"}),mobileBtnClose.addEventListener("click",function(){mobileCatalog.classList.remove("mobile-catalog--active")})}(),$(document).ready(function(){$("#slider-popular-goods").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$(".popular-goods__btn-prev"),nextArrow:$(".popular-goods__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-new-goods").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$(".new-goods__btn-prev"),nextArrow:$(".new-goods__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-looked").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$(".slider-product__btn-prev"),nextArrow:$(".slider-product__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-recommend").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$(".slider-product__btn-prev"),nextArrow:$(".slider-product__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-brands").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:6,slidesToScroll:1,centerPadding:"20px",prevArrow:$(".brands__btn-prev"),nextArrow:$(".brands__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:2}}]}),$("#slider-reviews").slick({arrow:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",slidesToShow:1,adaptiveHeight:!0,adaptiveHeight:!0,prevArrow:$(".reviews__btn-prev"),nextArrow:$(".reviews__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:1,slidesToScroll:1}}]}),$("#slider-promo").slick({arrow:!0,dots:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,prevArrow:$(".promo__slider__btn-prev"),nextArrow:$(".promo__slider__btn-next"),responsive:[{breakpoint:600,settings:{arrow:!1}},{breakpoint:480,settings:{arrow:!1}}]})}),$(window).resize(function(){document.body.offsetWidth<480&&$(".js-slider-blog").slick({dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1})}),$(window).resize(function(){document.body.offsetWidth<480&&$(".js-slider-news").slick({dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1})}),$(window).resize(function(){769<document.body.offsetWidth&&($("#tabs-links>li>a").click(function(){$("#tabs-links>li>a").removeClass("tabs__active"),$(this).addClass("tabs__active"),$("#tabs-container>div").hide();var t_content=$(this).attr("href");return $(t_content).show(),!1}),$("#tabs-links>.tabs__item:first-child a").trigger("click"))}),$(function(){$(".popup-modal").magnificPopup({type:"inline",preloader:!1,focus:"#username",modal:!0}),$(document).on("click",".popup-modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()})}),$(document).ready(function(){$(".vp-invisible").viewportChecker({classToAdd:"visible"})}),$(function(){$(".mobile-footer__cities").jScrollPane()});var oldScrollY=0,div=document.getElementById("header-fixed");$(window).resize(function(){document.body.offsetWidth<769&&(div.classList.add("fixed"),window.onscroll=function(){var scrolled=window.pageYOffset||document.documentElement.scrollTop,dY=scrolled-oldScrollY;div.className=0<dY?"fixed fixed-bottom":"fixed fixed-top",oldScrollY=scrolled})});var categoryPath=[0],catalogDB=[{id:1,name:"Вино"},{id:2,name:"Все",parentID:1},{id:3,name:"Розовое",parentID:1},{id:4,name:"Белое",parentID:1},{id:5,name:"Красное",parentID:1},{id:6,name:"Франция",parentID:5},{id:7,name:"Италия",parentID:5},{id:8,name:"Испания",parentID:5}];function createCategoryList(categories){for(var categoriesFragment=document.createDocumentFragment(),i=0;i<categories.length;i++){var li=document.createElement("li");li.className="mobile-catalog__item",li.innerHTML='<a class="mobile-catalog__link mobile-catalog__link--icon" href="#">'+categories[i].name+"</a>",li.querySelector("a").setAttribute("data-category-id",categories[i].id),categoriesFragment.appendChild(li)}document.querySelector(".mobile-catalog__list").innerHTML="",document.querySelector(".mobile-catalog__list").appendChild(categoriesFragment)}createCategoryList(catalogDB.slice(0,1)),document.querySelector(".mobile-catalog__list").addEventListener("click",function(evt){evt.preventDefault();var target=evt.target;if("A"==target.tagName){var categoryID=target.getAttribute("data-category-id");categoryPath.push(categoryID);var childrenCategories=catalogDB.filter(function(item){return item.parentID==categoryID}),category=catalogDB.find(function(item){return item.id==categoryID});document.querySelector(".mobile-catalog__name").innerText=category.name,createCategoryList(childrenCategories),document.querySelector(".mobile-catalog__header").contains(backButton)||document.querySelector(".mobile-catalog__header").insertAdjacentElement("afterbegin",backButton)}},!1);var backButton=document.createElement("button");backButton.className="mobile-catalog__btn",backButton.innerText="",backButton.addEventListener("click",function(evt){evt.preventDefault();var activeCatID=categoryPath.pop();catalogDB.find(function(item){return item.id==activeCatID});if(1==categoryPath.length)document.querySelector(".mobile-catalog__name").innerText="Каталог",backButton.parentNode.removeChild(backButton),createCategoryList(catalogDB.slice(0,1));else{var childrenCategories=catalogDB.filter(function(item){return item.parentID==categoryPath[categoryPath.length-1]}),parentCat=catalogDB.find(function(item){return item.id==categoryPath[categoryPath.length-1]});document.querySelector(".mobile-catalog__name").innerText=parentCat.name,createCategoryList(childrenCategories)}});var phoneElement=document.querySelector(".page-header__link.phone"),cityElement=document.querySelector(".page-header__link.city"),cityModal=document.querySelector(".popup__wrapper.popup-city__wrapper"),activeCityID=1,citiesDB=[{id:1,city:"Архангельск и Архангельская область",phone:"+7 3(812) 111-55-66"},{id:2,city:"Великий Новгород и Новгородская область",phone:"+7 4(812) 111-55-66"},{id:3,city:"Калининград и Калининградская область",phone:"+7 (812) 111-55-66"},{id:4,city:"Ленинградская область",phone:"+7 (312) 111-55-66"},{id:5,city:"Мурманск и Мурманская область",phone:"+7 (412) 111-55-66"},{id:6,city:"Москва",phone:"+7 (412) 111-55-66"},{id:7,city:"Петрозаводск и Республика Карелия",phone:"+7 (612) 111-55-66"},{id:8,city:"Санкт-Петербург",phone:"+7 (912) 111-55-66"}];function setCity(cityID){var activeCity=citiesDB.find(function(item){return item.id==cityID});cityElement.innerHTML=activeCity.city.split(" и")[0],phoneElement.innerHTML=activeCity.phone,phoneElement.href="tel:"+clearPhone(activeCity.phone)}function clearPhone(phone){return phone.replace(/[-,(,),\s]/g,"")}function createLetterBox(cities){var letter=cities[0].city[0].toUpperCase(),div=document.createElement("div");div.className="popup-city__box box__inner",div.innerHTML='<div class="popup-city__marker box__marker">'+letter+"</div>";for(var i=0;i<cities.length;i++){var link=document.createElement("a");link.className="popup-city__link box__link",link.innerText=cities[i].city,link.setAttribute("data-city-id",cities[i].id),div.append(link)}return div}function groupCities(cities){for(var result=[],letter=cities[0].city[0],localGroup=[],i=0;i<cities.length;i++)letter!=cities[i].city[0]&&(letter=cities[i].city[0],result.push(localGroup),localGroup=[]),localGroup.push(cities[i]);return result}setCity(activeCityID);for(var groupedCities=groupCities(citiesDB),lettersFragment=document.createDocumentFragment(),i=0;i<groupedCities.length;i++){var letterBox=createLetterBox(groupedCities[i]);lettersFragment.appendChild(letterBox)}document.querySelector("#city-popup .box").innerHTML="",document.querySelector("#city-popup .box").appendChild(lettersFragment),cityModal.addEventListener("click",function(evt){evt.preventDefault();var target=evt.target;"A"==target.tagName&&(setCity(target.getAttribute("data-city-id")),$.magnificPopup.close())});
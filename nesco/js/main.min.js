$(function(){$(".scrollbar").jScrollPane()}),$(document).ready(function(){$(".vp-invisible").viewportChecker({classToAdd:"visible"})}),function(){var mobileCatalog=document.querySelector(".mobile-catalog"),mobileCatalogBtn=document.querySelector(".mobile-sidebar__catalog-btn"),mobileBtnClose=document.querySelector(".mobile-catalog__close"),navMain=document.querySelector(".mobile-menu"),navToggle=document.querySelector(".navigation__toggle"),mobileItems=navMain.querySelectorAll(".mobile-menu__item");navToggle.addEventListener("click",function(){navMain.classList.toggle("mobile-menu--active"),navMain.classList.contains("mobile-catalog--active")&&document.querySelector("body").classList.add("overflow"),document.querySelector("body").classList.add("overflow"),document.querySelector(".paranja").style.position="absolute"}),document.querySelector(".mobile-menu__close").addEventListener("click",function(){navMain.classList.remove("mobile-menu--active"),document.querySelector("body").classList.remove("overflow"),document.querySelector(".paranja").style.position="relative"}),mobileCatalogBtn.addEventListener("click",function(){mobileCatalog.classList.toggle("mobile-catalog--active"),mobileCatalog.classList.contains("mobile-catalog--active")&&(document.querySelector("body").style.overflow="hidden"),document.querySelector("body").style.overflow="visible"}),mobileBtnClose.addEventListener("click",function(){mobileCatalog.classList.remove("mobile-catalog--active")}),mobileItems.forEach(function(item){item.addEventListener("click",function(){this.classList.toggle("mobile-menu__item--active")})})}(),function(){var btn=document.querySelector(".mobile-menu__cities").querySelector(".mobile-menu__city.button"),list=document.querySelector(".mobile-menu__list-cities");btn.addEventListener("click",function(evt){evt.preventDefault(),list.classList.contains("mobile-menu__list-cities--active")?list.classList.remove("mobile-menu__list-cities--active"):list.classList.add("mobile-menu__list-cities--active")})}(),function(){if(window.outerWidth<768){var finterBtn=document.querySelector("#mob-filters-btn"),filter=document.querySelector(".form-filters"),names=document.querySelectorAll(".form-filters__item-name");names&&names.forEach(function(name){name.addEventListener("click",function(evt){evt.preventDefault();var box=name.nextElementSibling;box.classList.toggle("form-filters__box--active"),console.log(box)})}),finterBtn&&finterBtn.addEventListener("click",function(){filter.classList.toggle("form-filters--active")})}}();var oldScrollY=0;if(768<window.outerWidth){(div=document.querySelector(".page-header__bottom")).classList.add("fixed")}else{var div=document.querySelector(".page-header__top");document.querySelector(".page-header__bottom").remove("fixed")}$(window).ready(function(){window.onscroll=function(){var scrolled=window.pageYOffset||document.documentElement.scrollTop,dY=scrolled-oldScrollY;div.className=0<dY?"fixed fixed-bottom":"fixed fixed-top",$(window).scrollTop()<60&&div.classList.remove("fixed-top"),$(window).scrollTop()<20&&div.classList.remove("fixed-bottom"),1e3<$(window).scrollTop()?div.classList.add("header-mobile--dark"):div.classList.remove("header-mobile--dark"),oldScrollY=scrolled}}),$(document).ready(function(){$("#slider-popular-goods").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-popular-goods"),nextArrow:$("#slider-base__btn-next-popular-goods"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-new-goods").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-new-goods"),nextArrow:$("#slider-base__btn-next-new-goods"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-looked").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-3"),nextArrow:$("#slider-base__btn-next-3"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-recommend").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$(".slider-base__btn-prev"),nextArrow:$(".slider-base__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-recommend-2").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:2,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-1"),nextArrow:$("#slider-base__btn-next-1"),responsive:[{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-recommend-3").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-1"),nextArrow:$("#slider-base__btn-next-1"),responsive:[{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-accessories").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:2,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-2"),nextArrow:$("#slider-base__btn-next-2"),responsive:[{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]}),$("#slider-brands").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:6,slidesToScroll:1,centerPadding:"40px",prevArrow:$("#slider-base__btn-prev-brands"),nextArrow:$("#slider-base__btn-next-brands"),responsive:[{breakpoint:1280,settings:{slidesToShow:6,slidesToScroll:1,infinite:!0}},{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:2}}]}),$("#slider-reviews").slick({arrow:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",slidesToShow:1,adaptiveHeight:!0,prevArrow:$(".reviews__btn-prev"),nextArrow:$(".reviews__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:1,slidesToScroll:1}}]}),$("#slider-promo").slick({arrow:!0,dots:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,prevArrow:$(".promo__slider__btn-prev"),nextArrow:$(".promo__slider__btn-next"),responsive:[{breakpoint:600,settings:{arrow:!1}},{breakpoint:480,settings:{arrow:!1}}]}),$(".js-slider-news").slick({responsive:[{breakpoint:99999,settings:"unslick"},{breakpoint:480,settings:{dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1}}]}),$(".js-slider-blog").slick({responsive:[{breakpoint:99999,settings:"unslick"},{breakpoint:480,settings:{dots:!0,infinite:!0,slidesToShow:1,slidesToScroll:1}}]}),$("#slider-pic-full").slick({arrow:!0,dots:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",adaptiveHeight:!0,slidesToShow:1,prevArrow:$(".promo__slider__btn-prev"),nextArrow:$(".promo__slider__btn-next"),responsive:[{breakpoint:600,settings:{arrow:!1}},{breakpoint:480,settings:{arrow:!1}}]}),$("#js-slider-contacts").slick({responsive:[{breakpoint:99999,settings:"unslick"},{breakpoint:480,settings:{dots:!0,arrow:!1,centerPadding:"40px",infinite:!0,slidesToShow:2,slidesToScroll:1}}]}),600<window.outerWidth&&$("#slider-1").slick({arrow:!0,infinite:!0,autoplay:!1,adaptiveHeight:!0,autoplaySpeed:2e3,slidesToShow:4,slidesToScroll:1,centerPadding:"40px",prevArrow:$(".popular-goods__btn-prev"),nextArrow:$(".popular-goods__btn-next"),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:600,settings:{arrow:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{arrow:!1,dots:!0,slidesToShow:2,slidesToScroll:1}}]})}),$(function(){$(".popup-modal").magnificPopup({type:"inline",preloader:!1,focus:"#username",modal:!0}),$(document).on("click",".popup-modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()})}),769<window.outerWidth&&($("#tabs-links>li>a").click(function(){$("#tabs-links>li>a").removeClass("tabs__active"),$(this).addClass("tabs__active"),$("#tabs-container>div").hide();var t_content=$(this).attr("href");return $(t_content).show(),!1}),$("#tabs-links>.tabs__item:first-child a").trigger("click")),$("#js-tabs-list>li>a").click(function(){$("#js-tabs-list>li>a").removeClass("tabs__active"),$(this).addClass("tabs__active"),$("#tabs-container>div").hide();var t_content=$(this).attr("href");return $(t_content).show(),!1}),$("#js-tabs-list>.tabs__item:first-child a").trigger("click"),769<window.outerWidth&&($("#js-tabs-list-2>li>a").click(function(){$("#js-tabs-list-2>li>a").removeClass("tabs__active"),$(this).addClass("tabs__active"),$(this).addClass("tabs__active--small"),$("#tabs-container>div").hide();var t_content=$(this).attr("href");return $(t_content).show(),!1}),$("#js-tabs-list-2>.tabs__item:first-child a").trigger("click")),$("#js-contacts>li>a").click(function(){$("#js-contacts>li>a").removeClass("tabs__active"),$(this).addClass("tabs__active"),$("#tabs-container>div").hide();var t_content=$(this).attr("href");return $(t_content).show(),!1}),$("#js-contacts>.tabs__item:first-child a").trigger("click"),$("#js-tabs-list-3>li>a").click(function(){$("#js-tabs-list-3>li>a").removeClass("tabs__active"),$(this).addClass("tabs__active"),$(this).addClass("tabs__active--small"),$("#js-tabs-list-3>li").removeClass("tabs__item--active"),$(this).parent().addClass("tabs__item--active"),$("#tabs-container>div").hide();var t_content=$(this).attr("href");$(t_content).show();var tabsBtn=document.querySelector(".tabs__button.button"),list=document.querySelector(".tabs__list");return tabsBtn.innerText=this.innerText,list.classList.remove("tabs__list--active"),!1}),$("#js-tabs-list-3>.tabs__item:first-child a").trigger("click"),function(){var tabsBtn=document.querySelector(".tabs__button.button"),list=document.querySelector(".tabs__list");tabsBtn&&tabsBtn.addEventListener("click",function(evt){evt.preventDefault(),list.classList.contains("tabs__list--active")?list.classList.remove("tabs__list--active"):list.classList.add("tabs__list--active")})}();var categoryPath=[0],catalogDB=[{id:1,name:"Вино"},{id:2,name:"Все",parentID:1},{id:3,name:"Розовое",parentID:1},{id:4,name:"Белое",parentID:1},{id:5,name:"Красное",parentID:1},{id:6,name:"Франция",parentID:5},{id:7,name:"Италия",parentID:5},{id:8,name:"Испания",parentID:5}];function createCategoryList(categories){for(var categoriesFragment=document.createDocumentFragment(),i=0;i<categories.length;i++){var li=document.createElement("li");li.className="mobile-catalog__item",li.innerHTML='<a class="mobile-catalog__link mobile-catalog__link--icon" href="#">'+categories[i].name+"</a>",li.querySelector("a").setAttribute("data-category-id",categories[i].id),categoriesFragment.appendChild(li)}document.querySelector(".mobile-catalog__list").innerHTML="",document.querySelector(".mobile-catalog__list").appendChild(categoriesFragment)}createCategoryList(catalogDB.slice(0,1)),document.querySelector(".mobile-catalog__list").addEventListener("click",function(evt){evt.preventDefault();var target=evt.target;if("A"==target.tagName){var categoryID=target.getAttribute("data-category-id");categoryPath.push(categoryID);var childrenCategories=catalogDB.filter(function(item){return item.parentID==categoryID}),category=catalogDB.find(function(item){return item.id==categoryID});document.querySelector(".mobile-catalog__name").innerText=category.name,createCategoryList(childrenCategories),document.querySelector(".mobile-catalog__header").contains(backButton)||document.querySelector(".mobile-catalog__header").insertAdjacentElement("afterbegin",backButton)}},!1);var backButton=document.createElement("button");backButton.className="mobile-catalog__btn",backButton.innerText="",backButton.addEventListener("click",function(evt){evt.preventDefault();var activeCatID=categoryPath.pop();catalogDB.find(function(item){return item.id==activeCatID});if(1==categoryPath.length)document.querySelector(".mobile-catalog__name").innerText="Каталог",backButton.parentNode.removeChild(backButton),createCategoryList(catalogDB.slice(0,1));else{var childrenCategories=catalogDB.filter(function(item){return item.parentID==categoryPath[categoryPath.length-1]}),parentCat=catalogDB.find(function(item){return item.id==categoryPath[categoryPath.length-1]});document.querySelector(".mobile-catalog__name").innerText=parentCat.name,createCategoryList(childrenCategories)}});var phoneElement=document.querySelector(".page-header__link.phone"),cityElement=document.querySelector(".page-header__link.city"),cityModal=document.querySelector(".popup__wrapper.popup-city__wrapper"),activeCityID=1,citiesDB=[{id:1,city:"Архангельск и Архангельская область",phone:"+7 3(812) 111-55-66"},{id:2,city:"Великий Новгород и Новгородская область",phone:"+7 4(812) 111-55-66"},{id:3,city:"Калининград и Калининградская область",phone:"+7 (812) 111-55-66"},{id:4,city:"Ленинградская область",phone:"+7 (312) 111-55-66"},{id:5,city:"Мурманск и Мурманская область",phone:"+7 (412) 111-55-66"},{id:6,city:"Москва",phone:"+7 (412) 111-55-66"},{id:7,city:"Петрозаводск и Республика Карелия",phone:"+7 (612) 111-55-66"},{id:8,city:"Санкт-Петербург",phone:"+7 (912) 111-55-66"}];function setCity(cityID){var activeCity=citiesDB.find(function(item){return item.id==cityID});cityElement.innerHTML=activeCity.city.split(" и")[0],phoneElement.innerHTML=activeCity.phone,phoneElement.href="tel:"+clearPhone(activeCity.phone)}function clearPhone(phone){return phone.replace(/[-,(,),\s]/g,"")}function createLetterBox(cities){var letter=cities[0].city[0].toUpperCase(),div=document.createElement("div");div.className="popup-city__box box__inner",div.innerHTML='<div class="popup-city__marker box__marker">'+letter+"</div>";for(var i=0;i<cities.length;i++){var link=document.createElement("a");link.className="popup-city__link box__link",link.innerText=cities[i].city,link.setAttribute("data-city-id",cities[i].id),div.append(link)}return div}function groupCities(cities){for(var result=[],letter=cities[0].city[0],localGroup=[],i=0;i<cities.length;i++)letter!=cities[i].city[0]&&(letter=cities[i].city[0],result.push(localGroup),localGroup=[]),localGroup.push(cities[i]);return result}setCity(activeCityID);for(var groupedCities=groupCities(citiesDB),lettersFragment=document.createDocumentFragment(),i=0;i<groupedCities.length;i++){var letterBox=createLetterBox(groupedCities[i]);lettersFragment.appendChild(letterBox)}document.querySelector("#city-popup .box").innerHTML="",document.querySelector("#city-popup .box").appendChild(lettersFragment),cityModal.addEventListener("click",function(evt){evt.preventDefault();var target=evt.target;"A"==target.tagName&&(setCity(target.getAttribute("data-city-id")),$.magnificPopup.close())}),$(".product__name").text(function(i,text){if(75<=text.length){var lastIndex=(text=text.substring(0,75)).lastIndexOf(" ");text=text.substring(0,lastIndex)+"..."}$(this).text(text)}),window.outerWidth<425&&$(".product__name").text(function(i,text){if(27<=text.length){var lastIndex=(text=text.substring(0,27)).lastIndexOf(" ");text=text.substring(0,lastIndex)+"..."}$(this).text(text)}),window.outerWidth<769&&$(".favorites-product__name").text(function(i,text){if(43<=text.length){var lastIndex=(text=text.substring(0,43)).lastIndexOf(" ");text=text.substring(0,lastIndex)+"..."}$(this).text(text)}),window.outerWidth<425&&$(".favorites-product__name").text(function(i,text){if(40<=text.length){var lastIndex=(text=text.substring(0,40)).lastIndexOf(" ");text=text.substring(0,lastIndex)+"..."}$(this).text(text)});var selectAll=[{id:1,text:"50"},{id:2,text:"по цене"},{id:3,text:"Сакнт-Петербург"},{id:4,text:"Жалобы и предложения"},{id:5,text:"по цене"},{id:6,text:"Сакнт-Петербург"}];for(i=0;i<selectAll.length;i++){var select=selectAll[i];$(".select-"+select.id).each(function(){var $this=$(this),selectOption=$this.find("option"),selectOptionLength=selectOption.length;selectOption.filter(":selected");$this.hide(),$this.wrap('<div class="select"></div>'),$("<div>",{class:"select__gap",text:select.text}).insertAfter($this);var selectGap=$this.next(".select__gap");selectGap.find(".caret");$("<ul>",{class:"select__list"}).insertAfter(selectGap);for(var selectList=selectGap.next(".select__list"),i=0;i<selectOptionLength;i++)$("<li>",{class:"select__item",html:$("<span>",{text:selectOption.eq(i).text()})}).attr("data-value",selectOption.eq(i).val()).appendTo(selectList);var selectItem=selectList.find("li");selectList.slideUp(0),selectGap.on("click",function(){$(this).hasClass("on")?($(this).removeClass("on"),selectList.slideUp(500)):($(this).addClass("on"),selectList.slideDown(500),selectItem.on("click",function(){var chooseItem=$(this).data("value");$("select").val(chooseItem).attr("selected","selected"),selectGap.text($(this).find("span").text()),selectList.slideUp(500),selectGap.removeClass("on")}))})})}function initCounters(){$(document).ready(function(){$(".minus__js").on("click",function(){var $counter=$(this).parent().find(".item__counter");""===$counter.val()&&$counter.val(0);var count=parseInt($counter.val())-1;return count=count<1?1:count,$counter.val(count),$counter.change(),!1}),$(".plus__js").click(function(){var $counter=$(this).parent().find(".item__counter");return""===$counter.val()&&$counter.val(0),$counter.val(parseInt($counter.val())+1),$counter.change(),!1}),$(".item__counter").on("input",function(){$(this).val()<0&&$(this).val(-1*$(this).val())})})}initCounters(),function($){$(".acc__content").hide(),$(".acc__link-more").click(function(){return $(this).parent().next().fadeIn(),$(this).hide(),!1}),$(".button.acc__close").click(function(){return $(".acc__link-more").show(),$(this).parent().fadeToggle(500,"linear"),scrollTo(0,window.scrollY/4),!1})}(jQuery),function(){var sidebarBtn=document.querySelector(".sidebar__btn-mob.button"),sidebarList=document.querySelector(".sidebar__list");sidebarBtn&&sidebarBtn.addEventListener("click",function(evt){evt.preventDefault(),sidebarList.classList.contains("sidebar__list--active")?sidebarList.classList.remove("sidebar__list--active"):sidebarList.classList.add("sidebar__list--active")}),sidebarList&&sidebarList.addEventListener("click",function(evt){var target=evt.target;sidebarBtn.innerText=target.innerText,sidebarList.classList.remove("sidebar__list--active")})}();